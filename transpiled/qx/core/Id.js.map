{
  "version": 3,
  "sources": [
    "/home/travis/build/cboulanger/qx-contrib-recorder/qooxdoo/framework/source/class/qx/core/Id.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "core",
    "Object",
    "include",
    "MObjectId",
    "type",
    "members",
    "__registeredObjects",
    "__registeredIdHashes",
    "_createObject",
    "id",
    "result",
    "_createObjectImpl",
    "obj",
    "undefined",
    "Init",
    "getApplication",
    "getAbsoluteIdOf",
    "suppressWarnings",
    "toHashCode",
    "getObjectId",
    "segs",
    "application",
    "error",
    "join",
    "unshift",
    "owner",
    "getOwner",
    "ownerId",
    "path",
    "register",
    "_cascadeObjectIdChanges",
    "unregister",
    "data",
    "hash",
    "statics",
    "getObject",
    "getInstance",
    "Id"
  ],
  "mappings": "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",
  "file": "Id.js",
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2017 Zenesis Limited, http://www.zenesis.com\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * John Spackman (john.spackman@zenesis.com, @johnspackman)\n\n************************************************************************ */\n\n/**\n * Provides a registry of top level objects\n */\nqx.Class.define(\"qx.core.Id\", {\n  extend: qx.core.Object,\n  include: [ qx.core.MObjectId ],\n  type: \"singleton\",\n  \n  members: {\n    \n    __registeredObjects: null,\n    __registeredIdHashes: null,\n\n    /*\n     * @Override\n     */\n    _createObject: function(id) {\n      // Create the object, but don't add it to the list of owned objects\n      var result = this._createObjectImpl(id);\n      return result;\n    },\n    \n    /*\n     * @Override\n     */\n    _createObjectImpl: function(id) {\n      if (this.__registeredObjects) {\n        var obj = this.__registeredObjects[id];\n        if (obj !== undefined) {\n          return obj;\n        }\n      }\n      \n      switch(id) {\n        case \"application\":\n          return qx.core.Init.getApplication() || undefined;\n      }\n      \n      return undefined;\n    },\n    \n    /**\n     * Returns an object path which can be used to locate an object anywhere in the application\n     * with a call to `qx.core.Id.getObject()`.\n     * \n     * This will return null if it is not possible to calculate a path because one of the\n     * ancestors has a null `objectId`.\n     * \n     * This will also return null if the top-most ancestor is not one of the globals registered\n     * with `registerObject` or a known global (such as the application); however, by passing\n     * `true` as the `suppressWarnings` parameter, this will prevent errors from appearing in \n     * the console when this happens  \n     * \n     * @param obj {qx.core.Object} the object\n     * @param suppressWarnings {Boolean?} default: false; silently returns null if an ID cannot be created \n     * @return {String} full path to the object\n     */\n    getAbsoluteIdOf: function(obj, suppressWarnings) {\n      if (this.__registeredIdHashes && this.__registeredIdHashes[obj.toHashCode()]) {\n        return obj.getObjectId();\n      }\n      var segs = [];\n      var application = qx.core.Init.getApplication();\n      while (obj) {\n        var id = obj.getObjectId();\n        if (!id) {\n          if (!suppressWarnings) {\n            this.error(\"Cannot determine an absolute Object ID because one of the ancestor ObjectID's is null (got as far as \" + segs.join('/') + \")\");\n          }\n          return null;\n        }\n        segs.unshift(id);\n        var owner = obj.getOwner();\n        if (owner) {\n          // Find the ID of the owner, *if* it is registered as a top level object\n          var ownerId = null;\n          if (owner === application) {\n            ownerId = \"application\";\n          } else {\n            ownerId = this.__registeredIdHashes && this.__registeredIdHashes[owner.toHashCode()] || null;\n          }\n\n          // When we have found the ID of a top level object, add it to the path and stop \n          if (ownerId) {\n            segs.unshift(ownerId);\n            break;\n          }\n        } else {\n          if (!suppressWarnings) {\n            this.error(\"Cannot determine a global absolute Object ID because the topmost object is not registered\");\n          }\n          return null;\n        }\n        obj = owner;\n      }\n      var path = segs.join(\"/\");\n      return path;\n    },\n    \n    /**\n     * Registers an object with an ID; as this is registering a global object which is the root of a tree \n     * of objects with IDs, the `id` parameter can be provided to set the ID used for the root object - this\n     * allows an object to be registered under a well known, common name without affecting the API of the\n     * object.  \n     * \n     * @param obj {qx.core.Object} the object to register\n     * @param id {String?} the ID to register the object under, otherwise the object's own Object Id is used\n     */\n    register: function(obj, id) {\n      if (!this.__registeredObjects) {\n        this.__registeredObjects = {};\n        this.__registeredIdHashes = {};\n      }\n      if (!id) {\n        id = obj.getObjectId();\n      }\n      this.__registeredObjects[id] = obj;\n      this.__registeredIdHashes[obj.toHashCode()] = id;\n      obj._cascadeObjectIdChanges();\n    },\n    \n    /**\n     * Unregisters a previously registered object with an ID\n     * \n     * @param data {Object|String} the object to unregister, or the ID of the object\n     * @return {Boolean} whether there was an object to unregister\n     */\n    unregister: function(data) {\n      if (!this.__registeredObjects) {\n        return false;\n      }\n      \n      var id;\n      if (typeof data == \"string\") {\n        id = data;\n      } else {\n        var hash = data.toHashCode();\n        id = this.__registeredIdHashes[hash];\n        if (!id) {\n          return false;\n        }\n      }\n      \n      var obj = this.__registeredObjects[id];\n      if (obj) {\n        delete this.__registeredObjects[id];\n        delete this.__registeredIdHashes[obj.toHashCode()];\n        obj._cascadeObjectIdChanges();\n        return true;\n      }\n      \n      return false;\n    }\n  },\n  \n  statics: {\n    \n    /**\n     * Returns a top level instance\n     *\n     * @param id {String} the ID to look for\n     * @return {qx.core.Object?} the object\n     */\n    getObject: function(id) {\n      return this.getInstance().getObject(id);\n    },\n    \n    /**\n     * Helper for `qx.core.Id.getAbsoluteIdOf`\n     * \n     * @param obj {qx.core.Object} the object\n     * @param suppressWarnings {Boolean?} default: false; silently returns null if an ID cannot be created \n     * @return {String} full path to the object\n     */\n    getAbsoluteIdOf: function(obj, suppressWarnings) {\n      return this.getInstance().getAbsoluteIdOf(obj, suppressWarnings);\n    }\n  }\n});"
  ]
}