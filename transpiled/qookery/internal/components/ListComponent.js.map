{
  "version": 3,
  "sources": [
    "/home/travis/build/cboulanger/eventrecorder/qx_packages/ergobyte_qookery_892f44d1d1ae5d65c7dd99b18da6876de2f2a920/qookery/source/class/qookery/internal/components/ListComponent.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "qookery",
    "internal",
    "components",
    "EditableComponent",
    "construct",
    "parentComponent",
    "members",
    "getAttributeType",
    "attributeName",
    "_createMainWidget",
    "list",
    "ui",
    "form",
    "List",
    "_applyAttribute",
    "addListener",
    "event",
    "_disableValueEvents",
    "selection",
    "getData",
    "getMainWidget",
    "getSelectionMode",
    "item",
    "setValue",
    "getModel",
    "value",
    "map",
    "length",
    "_applyWidgetAttributes",
    "_applyConnection",
    "modelProvider",
    "connection",
    "getAttribute",
    "undefined",
    "mapName",
    "setItems",
    "Qookery",
    "getRegistry",
    "getMap",
    "setup",
    "_updateUI",
    "resetSelection",
    "__findItem",
    "push",
    "i",
    "setSelection",
    "addItem",
    "model",
    "label",
    "icon",
    "_getLabelOf",
    "ListItem",
    "textAlign",
    "getChildControl",
    "setAllowGrowX",
    "setTextAlign",
    "add",
    "items",
    "removeAllItems",
    "data",
    "Array",
    "toArray",
    "lang",
    "Type",
    "isArray",
    "isObject",
    "Conversion",
    "toString",
    "removeAll",
    "forEach",
    "widget",
    "dispose",
    "itemNumber",
    "selectablesItems",
    "getSelectables",
    "getChildren",
    "getForm",
    "getModelProvider",
    "model2",
    "areEqual",
    "ListComponent"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/*\n\tQookery - Declarative UI Building for Qooxdoo\n\n\tCopyright (c) Ergobyte Informatics S.A., www.ergobyte.gr\n\n\tLicensed under the Apache License, Version 2.0 (the \"License\");\n\tyou may not use this file except in compliance with the License.\n\tYou may obtain a copy of the License at\n\n\t\thttp://www.apache.org/licenses/LICENSE-2.0\n\n\tUnless required by applicable law or agreed to in writing, software\n\tdistributed under the License is distributed on an \"AS IS\" BASIS,\n\tWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n\tSee the License for the specific language governing permissions and\n\tlimitations under the License.\n*/\n\nqx.Class.define(\"qookery.internal.components.ListComponent\", {\n\n\textend: qookery.internal.components.EditableComponent,\n\n\tconstruct: function(parentComponent) {\n\t\tthis.base(arguments, parentComponent);\n\t},\n\n\tmembers: {\n\n\t\t// Metadata\n\n\t\tgetAttributeType: function(attributeName) {\n\t\t\tswitch(attributeName) {\n\t\t\tcase \"map\": return \"String\";\n\t\t\tcase \"spacing\": return \"Integer\";\n\t\t\tcase \"orientation\": return \"String\";\n\t\t\t}\n\t\t\treturn this.base(arguments, attributeName);\n\t\t},\n\n\t\t// Construction\n\n\t\t_createMainWidget: function() {\n\t\t\tvar list = new qx.ui.form.List();\n\t\t\tthis._applyAttribute(\"scrollbar-x\", list, \"scrollbarX\");\n\t\t\tthis._applyAttribute(\"scrollbar-y\", list, \"scrollbarY\");\n\t\t\tthis._applyAttribute(\"selection-mode\", list, \"selectionMode\");\n\t\t\tthis._applyAttribute(\"spacing\", list, \"spacing\");\n\t\t\tlist.addListener(\"changeSelection\", function(event) {\n\t\t\t\tif(this._disableValueEvents) return;\n\t\t\t\tvar selection = event.getData();\n\t\t\t\tswitch(this.getMainWidget().getSelectionMode()) {\n\t\t\t\tcase \"single\": case \"one\":\n\t\t\t\t\tvar item = selection[0];\n\t\t\t\t\tthis.setValue(item ? item.getModel() : null);\n\t\t\t\t\treturn;\n\t\t\t\tcase \"multi\": case \"additive\":\n\t\t\t\t\tvar value = selection.map(function(item) {\n\t\t\t\t\t\treturn item.getModel();\n\t\t\t\t\t});\n\t\t\t\t\tthis.setValue(value.length > 0 ? value : null);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}, this);\n\t\t\tthis._applyWidgetAttributes(list);\n\t\t\treturn list;\n\t\t},\n\n\t\t_applyConnection: function(modelProvider, connection) {\n\t\t\tif(this.getAttribute(\"map\") === undefined) {\n\t\t\t\tvar mapName = connection.getAttribute(\"map\");\n\t\t\t\tif(mapName != null)\n\t\t\t\t\tthis.setItems(qookery.Qookery.getRegistry().getMap(mapName));\n\t\t\t}\n\t\t\tthis.base(arguments, modelProvider, connection);\n\t\t},\n\n\t\tsetup: function() {\n\t\t\tvar mapName = this.getAttribute(\"map\");\n\t\t\tif(mapName !== undefined)\n\t\t\t\tthis.setItems(qookery.Qookery.getRegistry().getMap(mapName));\n\t\t\tthis.base(arguments);\n\t\t},\n\n\t\t_updateUI: function(value) {\n\t\t\tif(!value) {\n\t\t\t\tthis.getMainWidget().resetSelection();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar selection = [ ];\n\t\t\tswitch(this.getMainWidget().getSelectionMode()) {\n\t\t\tcase \"single\": case \"one\":\n\t\t\t\tvar item = this.__findItem(value);\n\t\t\t\tif(item) selection.push(item);\n\t\t\t\tbreak;\n\t\t\tcase \"multi\": case \"additive\":\n\t\t\t\tfor(var i = 0; i < value.length; i++) {\n\t\t\t\t\tvar item = this.__findItem(value[i]);\n\t\t\t\t\tif(item) selection.push(item);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif(selection.length > 0)\n\t\t\t\tthis.getMainWidget().setSelection(selection);\n\t\t\telse\n\t\t\t\tthis.getMainWidget().resetSelection();\n\t\t},\n\n\t\taddItem: function(model, label, icon) {\n\t\t\tif(!label) label = this._getLabelOf(model);\n\t\t\tvar item = new qx.ui.form.ListItem(label, icon, model);\n\t\t\tvar textAlign = this.getAttribute(\"text-align\", null);\n\t\t\tif(textAlign != null) {\n\t\t\t\titem.getChildControl(\"label\").setAllowGrowX(true);\n\t\t\t\titem.getChildControl(\"label\").setTextAlign(textAlign);\n\t\t\t}\n\t\t\tthis.getMainWidget().add(item);\n\t\t},\n\n\t\tsetItems: function(items) {\n\t\t\tthis.removeAllItems();\n\t\t\tif(items instanceof qx.data.Array) items = items.toArray();\n\t\t\tif(qx.lang.Type.isArray(items)) {\n\t\t\t\tfor(var i = 0; i < items.length; i++) {\n\t\t\t\t\tvar model = items[i];\n\t\t\t\t\tvar label = this._getLabelOf(model);\n\t\t\t\t\tthis.addItem(model, label);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if(qx.lang.Type.isObject(items)) {\n\t\t\t\tfor(var model in items) {\n\t\t\t\t\tvar label = items[model];\n\t\t\t\t\tthis.addItem(model, qx.data.Conversion.toString(label));\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tremoveAllItems: function() {\n\t\t\tthis.getMainWidget().removeAll().forEach(function(widget) { widget.dispose(); });\n\t\t},\n\n\t\tsetSelection: function(itemNumber) {\n\t\t\tvar selectablesItems = this.getMainWidget().getSelectables(true);\n\t\t\tif(!selectablesItems || selectablesItems[itemNumber] === undefined) return;\n\t\t\tthis.getMainWidget().setSelection([ selectablesItems[itemNumber] ]);\n\t\t},\n\n\t\t__findItem: function(model) {\n\t\t\tvar items = this.getMainWidget().getChildren();\n\t\t\tvar modelProvider = this.getForm().getModelProvider();\n\t\t\tfor(var i = 0; i < items.length; i++) {\n\t\t\t\tvar item = items[i];\n\t\t\t\tvar model2 = item.getModel();\n\t\t\t\tif(!modelProvider.areEqual(model, model2)) continue;\n\t\t\t\treturn item;\n\t\t\t}\n\t\t}\n\t}\n});\n"
  ]
}