{
  "version": 3,
  "sources": [
    "/home/travis/build/cboulanger/eventrecorder/qx_packages/ergobyte_qookery_892f44d1d1ae5d65c7dd99b18da6876de2f2a920/qookery/source/class/qookery/internal/components/FormComponent.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "qookery",
    "internal",
    "components",
    "CompositeComponent",
    "implement",
    "IFormComponent",
    "construct",
    "parentComponent",
    "__status",
    "__components",
    "__connections",
    "events",
    "properties",
    "nullable",
    "check",
    "event",
    "init",
    "dereference",
    "apply",
    "members",
    "__scriptingContext",
    "__serviceResolver",
    "__translationPrefix",
    "__operationQueue",
    "__modelProvider",
    "getAttributeType",
    "attributeName",
    "setAttribute",
    "value",
    "A_SERVICE_RESOLVER",
    "A_TRANSLATION_PREFIX",
    "A_VARIABLES",
    "$",
    "__createScriptingContext",
    "create",
    "attributes",
    "__enableOperationQueuing",
    "debug",
    "Qookery",
    "getRegistry",
    "getModelProvider",
    "getAttribute",
    "_applyAttribute",
    "setup",
    "title",
    "undefined",
    "setTitle",
    "locale",
    "LocalizedString",
    "translate",
    "__flushOperationQueue",
    "focus",
    "core",
    "Environment",
    "get",
    "executeAction",
    "isReady",
    "markAsReady",
    "getForm",
    "getParentForm",
    "parentForm",
    "getVariable",
    "getParent",
    "getTranslationPrefix",
    "resolveService",
    "serviceName",
    "resolver",
    "service",
    "getService",
    "variableName",
    "defaultValue",
    "setVariable",
    "getComponent",
    "componentId",
    "required",
    "component",
    "Error",
    "lang",
    "String",
    "format",
    "putComponent",
    "getScriptingContext",
    "context",
    "validate",
    "__queueOperation",
    "baseError",
    "actionError",
    "setValid",
    "errors",
    "push",
    "Type",
    "isString",
    "util",
    "ValidationError",
    "message",
    "tr",
    "getTitle",
    "parseXmlElement",
    "elementName",
    "xmlElement",
    "__parseImport",
    "__parseTranslation",
    "__parseVariable",
    "variables",
    "selector",
    "charAt",
    "substr",
    "bind",
    "Object",
    "mergeWith",
    "importElement",
    "name",
    "getter",
    "className",
    "Xml",
    "getByName",
    "formName",
    "form",
    "getId",
    "singletonName",
    "getInstance",
    "substring",
    "lastIndexOf",
    "hasOwnProperty",
    "isRequired",
    "onDemand",
    "g",
    "defineProperty",
    "configurable",
    "enumerable",
    "set",
    "v",
    "translationElement",
    "dom",
    "Element",
    "hasChildren",
    "languageCode",
    "xml",
    "getAttributeNS",
    "messages",
    "children",
    "Hierarchy",
    "getChildElements",
    "i",
    "length",
    "messageElement",
    "Node",
    "getName",
    "messageId",
    "getNodeText",
    "Manager",
    "addTranslation",
    "variableElement",
    "providerName",
    "provider",
    "hasInterface",
    "constructor",
    "IVariableProvider",
    "typeName",
    "parseValue",
    "writable",
    "setFunction",
    "close",
    "result",
    "isDisposed",
    "fireDataEvent",
    "addConnection",
    "editableComponent",
    "modelPropertyPath",
    "connection",
    "Connection",
    "connect",
    "getModel",
    "removeConnection",
    "disconnect",
    "equals",
    "splice",
    "_applyModel",
    "model",
    "toString",
    "hash",
    "$$hash",
    "classname",
    "operation",
    "indexOf",
    "queue",
    "call",
    "destruct",
    "FormComponent"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/*\n\tQookery - Declarative UI Building for Qooxdoo\n\n\tCopyright (c) Ergobyte Informatics S.A., www.ergobyte.gr\n\n\tLicensed under the Apache License, Version 2.0 (the \"License\");\n\tyou may not use this file except in compliance with the License.\n\tYou may obtain a copy of the License at\n\n\t\thttp://www.apache.org/licenses/LICENSE-2.0\n\n\tUnless required by applicable law or agreed to in writing, software\n\tdistributed under the License is distributed on an \"AS IS\" BASIS,\n\tWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n\tSee the License for the specific language governing permissions and\n\tlimitations under the License.\n*/\n\nqx.Class.define(\"qookery.internal.components.FormComponent\", {\n\n\textend: qookery.internal.components.CompositeComponent,\n\timplement: [ qookery.IFormComponent ],\n\n\tconstruct: function(parentComponent) {\n\t\tthis.base(arguments, parentComponent);\n\t\tthis.__status = \"NEW\";\n\t\tthis.__components = { };\n\t\tthis.__connections = [ ];\n\t},\n\n\tevents: {\n\t\t\"close\": \"qx.event.type.Data\"\n\t},\n\n\tproperties: {\n\t\t\"icon\": { nullable: true },\n\t\t\"title\": { nullable: true, check: \"String\", event: \"changeTitle\" },\n\t\t\"valid\": { nullable: false, check: \"Boolean\", init: true, event: \"changeValid\" },\n\t\t\"model\": { nullable: true, dereference: true, event: \"changeModel\", apply: \"_applyModel\" }\n\t},\n\n\tmembers: {\n\n\t\t__status: null,\n\t\t__components: null,\n\t\t__connections: null,\n\t\t__scriptingContext: null,\n\t\t__serviceResolver: null,\n\t\t__translationPrefix: null,\n\t\t__operationQueue: null,\n\t\t__modelProvider: null,\n\n\t\t// Metadata\n\n\t\tgetAttributeType: function(attributeName) {\n\t\t\tswitch(attributeName) {\n\t\t\tcase \"title\": return \"ReplaceableString\";\n\t\t\t}\n\t\t\treturn this.base(arguments, attributeName);\n\t\t},\n\n\t\tsetAttribute: function(attributeName, value) {\n\t\t\tswitch(attributeName) {\n\t\t\tcase qookery.IFormComponent.A_SERVICE_RESOLVER:\n\t\t\t\tthis.__serviceResolver = value;\n\t\t\t\treturn;\n\t\t\tcase qookery.IFormComponent.A_TRANSLATION_PREFIX:\n\t\t\t\tthis.__translationPrefix = value;\n\t\t\t\treturn;\n\t\t\tcase qookery.IFormComponent.A_VARIABLES:\n\t\t\t\tthis.__scriptingContext = this.$ = this.__createScriptingContext(value);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\treturn this.base(arguments, attributeName, value);\n\t\t},\n\n\t\t// Lifecycle\n\n\t\tcreate: function(attributes) {\n\t\t\tthis.__enableOperationQueuing();\n\t\t\tthis.debug(\"Created\");\n\t\t\tthis.base(arguments, attributes);\n\t\t\tthis.__modelProvider = qookery.Qookery.getRegistry().getModelProvider(this.getAttribute(\"model-provider\"));\n\t\t\tthis._applyAttribute(\"icon\", this, \"icon\");\n\t\t},\n\n\t\tsetup: function() {\n\t\t\tvar title = this.getAttribute(\"title\");\n\t\t\tif(title !== undefined)\n\t\t\t\tthis.setTitle(title instanceof qx.locale.LocalizedString ? title.translate() : title);\n\t\t\tthis.__flushOperationQueue();\n\t\t\treturn this.base(arguments);\n\t\t},\n\n\t\tfocus: function() {\n\t\t\t// Do not handle form focus on touch devices - this is a hack to prevent the virtual keyboard from\n\t\t\t// popping up when the XML author sets the focus to text fields (and other components)\n\t\t\tif(qx.core.Environment.get(\"device.touch\")) return;\n\t\t\tthis.executeAction(\"onFocusReceived\");\n\t\t},\n\n\t\tisReady: function() {\n\t\t\treturn this.__status === \"READY\";\n\t\t},\n\n\t\tmarkAsReady: function() {\n\t\t\tthis.__status = \"READY\";\n\t\t},\n\n\t\t// Getters and setters\n\n\t\tgetForm: function() {\n\t\t\treturn this;\n\t\t},\n\n\t\tgetParentForm: function() {\n\t\t\tvar parentForm = this.getVariable(\"parentForm\");\n\t\t\tif(parentForm != null) return parentForm;\n\t\t\tvar parentComponent = this.getParent();\n\t\t\tif(!parentComponent) return null;\n\t\t\treturn parentComponent.getForm();\n\t\t},\n\n\t\tgetTranslationPrefix: function() {\n\t\t\treturn this.__translationPrefix;\n\t\t},\n\n\t\tgetModelProvider: function() {\n\t\t\treturn this.__modelProvider;\n\t\t},\n\n\t\t// Services\n\n\t\tresolveService: function(serviceName) {\n\t\t\tvar resolver = this.__serviceResolver;\n\t\t\tif(resolver != null) {\n\t\t\t\tvar service = resolver(serviceName);\n\t\t\t\tif(service != null)\n\t\t\t\t\treturn service;\n\t\t\t}\n\t\t\tvar parentForm = this.getParentForm();\n\t\t\tif(parentForm != null)\n\t\t\t\treturn parentForm.resolveService(serviceName);\n\t\t\treturn qookery.Qookery.getService(serviceName, false);\n\t\t},\n\n\t\t// Variables\n\n\t\tgetVariable: function(variableName, defaultValue) {\n\t\t\tvar value = this.__scriptingContext[variableName];\n\t\t\tif(value !== undefined) return value;\n\t\t\treturn defaultValue;\n\t\t},\n\n\t\tsetVariable: function(variableName, value) {\n\t\t\tthis.__scriptingContext[variableName] = value;\n\t\t},\n\n\t\t// Component registration\n\n\t\tgetComponent: function(componentId, required) {\n\t\t\tvar component = this.__components[componentId];\n\t\t\tif(component == null && required === true)\n\t\t\t\tthrow new Error(qx.lang.String.format(\"Reference to unregistered component '%1'\", [ componentId ]));\n\t\t\treturn component;\n\t\t},\n\n\t\tputComponent: function(componentId, component) {\n\t\t\tthis.__components[componentId] = component;\n\t\t},\n\n\t\t// Client scripting context\n\n\t\tgetScriptingContext: function() {\n\t\t\tvar context = this.__scriptingContext;\n\t\t\tif(context == null)\n\t\t\t\tthrow new Error(\"Scripting context is not available\");\n\t\t\treturn context;\n\t\t},\n\n\t\t// Validation\n\n\t\tvalidate: function() {\n\t\t\tif(this.__queueOperation(this.validate)) return null;\n\t\t\tvar baseError = this.base(arguments);\n\t\t\tvar actionError = this.executeAction(\"validate\");\n\t\t\tif(baseError == null && actionError == null) {\n\t\t\t\tthis.setValid(true);\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tvar errors = [ ];\n\t\t\tif(baseError) errors.push(baseError);\n\t\t\tif(actionError) {\n\t\t\t\tif(qx.lang.Type.isString(actionError))\n\t\t\t\t\terrors.push(new qookery.util.ValidationError(this, actionError));\n\t\t\t\telse\n\t\t\t\t\terrors.push(actionError);\n\t\t\t}\n\t\t\tthis.setValid(false);\n\t\t\tvar message = this.tr(\"qookery.internal.components.FormComponent.validationErrors\", this.getTitle());\n\t\t\treturn new qookery.util.ValidationError(this, message, errors);\n\t\t},\n\n\t\tparseXmlElement: function(elementName, xmlElement) {\n\t\t\tswitch(elementName) {\n\t\t\tcase \"{http://www.qookery.org/ns/Form}import\":\n\t\t\t\tthis.__parseImport(xmlElement);\n\t\t\t\treturn true;\n\t\t\tcase \"{http://www.qookery.org/ns/Form}translation\":\n\t\t\t\tthis.__parseTranslation(xmlElement);\n\t\t\t\treturn true;\n\t\t\tcase \"{http://www.qookery.org/ns/Form}variable\":\n\t\t\t\tthis.__parseVariable(xmlElement);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\n\t\t// Internals\n\n\t\t__createScriptingContext: function(variables) {\n\t\t\tvar context = function(selector) {\n\t\t\t\tif(selector == null) {\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\t\t\t\tif(selector === \":parent\") {\n\t\t\t\t\treturn this.getParentForm();\n\t\t\t\t}\n\t\t\t\tif(selector.charAt(0) === \"#\") {\n\t\t\t\t\treturn this.getComponent(selector.substr(1));\n\t\t\t\t}\n\t\t\t\treturn null;\n\t\t\t}.bind(this);\n\t\t\tcontext[\"form\"] = // Deprecated, use capitalized version $.Form\n\t\t\tcontext[\"Form\"] = this;\n\t\t\tif(variables != null) qx.lang.Object.mergeWith(context, variables, false);\n\t\t\treturn context;\n\t\t},\n\n\t\t__parseImport: function(importElement) {\n\t\t\tvar name = null, getter = null;\n\t\t\tvar className = qookery.util.Xml.getAttribute(importElement, \"class\");\n\t\t\tif(className != null) {\n\t\t\t\tname = className;\n\t\t\t\tgetter = function() { return qx.Class.getByName(className); };\n\t\t\t}\n\t\t\tvar formName = qookery.util.Xml.getAttribute(importElement, \"form\");\n\t\t\tif(formName != null) {\n\t\t\t\tname = formName;\n\t\t\t\tgetter = function() {\n\t\t\t\t\tvar form = this;\n\t\t\t\t\tdo {\n\t\t\t\t\t\tif(form.getId() === formName) return form;\n\t\t\t\t\t\tform = form.getParentForm();\n\t\t\t\t\t}\n\t\t\t\t\twhile(form != null);\n\t\t\t\t}.bind(this);\n\t\t\t}\n\t\t\tvar serviceName = qookery.util.Xml.getAttribute(importElement, \"service\");\n\t\t\tif(serviceName != null) {\n\t\t\t\tname = serviceName;\n\t\t\t\tgetter = this.resolveService.bind(this, serviceName);\n\t\t\t}\n\t\t\tvar singletonName = qookery.util.Xml.getAttribute(importElement, \"singleton\");\n\t\t\tif(singletonName != null) {\n\t\t\t\tname = singletonName;\n\t\t\t\tgetter = function() { return qx.Class.getByName(singletonName).getInstance(); };\n\t\t\t}\n\t\t\tif(name == null || getter == null) {\n\t\t\t\tthrow new Error(\"Invalid <import> element\");\n\t\t\t}\n\t\t\tvar variableName = qookery.util.Xml.getAttribute(importElement, \"variable\");\n\t\t\tif(variableName == null) {\n\t\t\t\tvariableName = name.substring(name.lastIndexOf(\".\") + 1);\n\t\t\t}\n\t\t\tif(this.__scriptingContext.hasOwnProperty(variableName)) {\n\t\t\t\tthrow new Error(\"Variable '\" + variableName + \"' has already been defined\");\n\t\t\t}\n\t\t\tvar isRequired = qookery.util.Xml.getAttribute(importElement, \"optional\") !== \"true\";\n\t\t\tvar onDemand = qookery.util.Xml.getAttribute(importElement, \"resolution\") === \"on-demand\";\n\t\t\tif(!onDemand) {\n\t\t\t\tvar value = getter();\n\t\t\t\tif(value == null && isRequired)\n\t\t\t\t\tthrow new Error(\"Unable to resolve required import '\" + name + \"'\");\n\t\t\t\tgetter = function() { return value; };\n\t\t\t}\n\t\t\telse if(isRequired) {\n\t\t\t\tvar g = getter;\n\t\t\t\tgetter = function() {\n\t\t\t\t\tvar value = g();\n\t\t\t\t\tif(value == null)\n\t\t\t\t\t\tthrow new Error(\"Unable to resolve required import '\" + name + \"'\");\n\t\t\t\t\treturn value;\n\t\t\t\t};\n\t\t\t}\n\t\t\tObject.defineProperty(this.__scriptingContext, variableName, {\n\t\t\t\tconfigurable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\tget: getter,\n\t\t\t\tset: function(v) { throw new Error(\"Illegal write access to form import\"); }\n\t\t\t});\n\t\t},\n\n\t\t__parseTranslation: function(translationElement) {\n\t\t\tif(!qx.dom.Element.hasChildren(translationElement)) return;\n\t\t\tvar languageCode = qx.xml.Element.getAttributeNS(translationElement, \"http://www.w3.org/XML/1998/namespace\", \"lang\");\n\t\t\tif(languageCode == null)\n\t\t\t\tthrow new Error(\"Language code missing\");\n\t\t\tvar messages = { };\n\t\t\tvar children = qx.dom.Hierarchy.getChildElements(translationElement);\n\t\t\tfor(var i = 0; i < children.length; i++) {\n\t\t\t\tvar messageElement = children[i];\n\t\t\t\tvar elementName = qx.dom.Node.getName(messageElement);\n\t\t\t\tif(elementName != \"message\")\n\t\t\t\t\tthrow new Error(qx.lang.String.format(\"Unexpected XML element '%1' in translation block\", [ elementName ]));\n\t\t\t\tvar messageId = qookery.util.Xml.getAttribute(messageElement, \"id\", Error);\n\t\t\t\tif(this.__translationPrefix != null)\n\t\t\t\t\tmessageId = this.__translationPrefix + \".\" + messageId;\n\t\t\t\tmessages[messageId] = qookery.util.Xml.getNodeText(messageElement);\n\t\t\t}\n\t\t\tqx.locale.Manager.getInstance().addTranslation(languageCode, messages);\n\t\t},\n\n\t\t__parseVariable: function(variableElement) {\n\t\t\tvar variableName = qookery.util.Xml.getAttribute(variableElement, \"name\", Error);\n\t\t\tvar providerName = qookery.util.Xml.getAttribute(variableElement, \"provider\", \"Form\");\n\t\t\tvar provider = this.__scriptingContext[providerName];\n\t\t\tif(provider == null || !qx.Class.hasInterface(provider.constructor, qookery.IVariableProvider))\n\t\t\t\tthrow new Error(\"Variable provider '\" + providerName + \"' missing from scripting context\");\n\t\t\tvar value = provider.getVariable(variableName);\n\t\t\tif(value == null) {\n\t\t\t\tvar defaultValue = qookery.util.Xml.getNodeText(variableElement);\n\t\t\t\tif(defaultValue == null)\n\t\t\t\t\tdefaultValue = qookery.util.Xml.getAttribute(variableElement, \"default\");\n\t\t\t\tif(defaultValue != null) {\n\t\t\t\t\tvar typeName = qookery.util.Xml.getAttribute(variableElement, \"type\", \"Expression\");\n\t\t\t\t\tvalue = qookery.util.Xml.parseValue(this, typeName, defaultValue);\n\t\t\t\t}\n\t\t\t\tif(value === undefined) value = null;\n\t\t\t\tif(value === null && qookery.util.Xml.getAttribute(variableElement, \"required\") === \"true\")\n\t\t\t\t\tthrow new Error(\"Value for required variable '\" + variableName + \"' is missing\");\n\t\t\t\tprovider.setVariable(variableName, value);\n\t\t\t}\n\t\t\tif(provider === this) return;\n\t\t\tvar writable = qookery.util.Xml.getAttribute(variableElement, \"writable\") !== \"false\";\n\t\t\tvar setFunction = writable ?\n\t\t\t\tfunction(v) { provider.setVariable(variableName, v); } :\n\t\t\t\tfunction(v) { throw new Error(\"Illegal attempt to modify non-writable variable '\" + variableName + \"'\"); };\n\t\t\tObject.defineProperty(this.__scriptingContext, variableName, {\n\t\t\t\tconfigurable: false,\n\t\t\t\tenumerable: true,\n\t\t\t\tget: function() { return provider.getVariable(variableName); },\n\t\t\t\tset: setFunction\n\t\t\t});\n\t\t},\n\n\t\t// Operations\n\n\t\tclose: function(result) {\n\t\t\tif(this.isDisposed()) return;\n\t\t\tif(result !== undefined) this.__scriptingContext[\"result\"] = result;\n\t\t\tthis.fireDataEvent(\"close\", result);\n\t\t},\n\n\t\t// Model connection\n\n\t\taddConnection: function(editableComponent, modelPropertyPath) {\n\t\t\tvar connection = new qookery.internal.util.Connection(editableComponent, modelPropertyPath);\n\t\t\tthis.__connections.push(connection);\n\t\t\tconnection.connect(this.getModel()); // Attempt model connection immediately\n\t\t\treturn connection;\n\t\t},\n\n\t\tremoveConnection: function(connection) {\n\t\t\tconnection.disconnect();\n\t\t\tfor(var i = 0; i < this.__connections.length; i++) {\n\t\t\t\tif(connection.equals(this.__connections[i]))\n\t\t\t\t\tthis.__connections.splice(i, 1);\n\t\t\t}\n\t\t},\n\n\t\t_applyModel: function(model) {\n\t\t\tfor(var i = 0; i < this.__connections.length; i++) {\n\t\t\t\tvar connection = this.__connections[i];\n\t\t\t\tconnection.connect(model);\n\t\t\t}\n\t\t},\n\n\t\t// Miscellaneous implementations\n\n\t\ttoString: function() {\n\t\t\tvar hash = this.getId() || this.$$hash;\n\t\t\treturn this.classname + \"[\" + hash + \"]\";\n\t\t},\n\n\t\t// Operation queuing\n\n\t\t__enableOperationQueuing: function() {\n\t\t\tthis.__operationQueue = [ ];\n\t\t},\n\n\t\t__queueOperation: function(operation) {\n\t\t\tif(this.__operationQueue === null) return false;\n\t\t\tif(this.__operationQueue.indexOf(operation) === -1)\n\t\t\t\tthis.__operationQueue.push(operation);\n\t\t\treturn true;\n\t\t},\n\n\t\t__flushOperationQueue: function() {\n\t\t\tif(this.__operationQueue === null) return;\n\t\t\tvar queue = this.__operationQueue;\n\t\t\tthis.__operationQueue = null;\n\t\t\tif(queue.length === 0) return;\n\t\t\tfor(var i = 0; i < queue.length; i++) {\n\t\t\t\tvar operation = queue[i];\n\t\t\t\toperation.call(this);\n\t\t\t}\n\t\t}\n\t},\n\n\tdestruct: function() {\n\t\tthis.__status = \"DISPOSED\";\n\t\tfor(var i = 0; i < this.__connections.length; i++)\n\t\t\tthis.__connections[i].disconnect();\n\t\tthis.debug(\"Destructed\");\n\t}\n});\n"
  ]
}