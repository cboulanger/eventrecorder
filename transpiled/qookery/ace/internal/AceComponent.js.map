{
  "version": 3,
  "sources": [
    "/home/travis/build/cboulanger/eventrecorder/qx_packages/ergobyte_qookery_892f44d1d1ae5d65c7dd99b18da6876de2f2a920/qookeryace/source/class/qookery/ace/internal/AceComponent.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "qookery",
    "internal",
    "components",
    "EditableComponent",
    "construct",
    "parentComponent",
    "members",
    "__editor",
    "__ignoreChangeEvents",
    "getAttributeType",
    "attributeName",
    "setAttribute",
    "value",
    "getSession",
    "setMode",
    "_createMainWidget",
    "widget",
    "ace",
    "AceWidget",
    "_applyWidgetAttributes",
    "setup",
    "libraryNames",
    "autoComplete",
    "getAttribute",
    "push",
    "Qookery",
    "getRegistry",
    "loadLibrary",
    "error",
    "aceWidget",
    "getMainWidget",
    "getContentElement",
    "getDomElement",
    "__attachAceEditor",
    "addListenerOnce",
    "getEditor",
    "_updateUI",
    "getValue",
    "setValue",
    "e",
    "_applyValid",
    "valid",
    "addState",
    "removeState",
    "setInvalidMessage",
    "invalidMessage",
    "focus",
    "aceContainer",
    "editor",
    "edit",
    "setReadOnly",
    "isReadOnly",
    "setHighlightActiveLine",
    "setShowFoldWidgets",
    "setShowInvisibles",
    "setShowPrintMargin",
    "setOption",
    "lang",
    "Array",
    "contains",
    "$blockScrolling",
    "Infinity",
    "on",
    "__onChange",
    "bind",
    "renderer",
    "setPrintMarginColumn",
    "setDisplayIndentGuides",
    "setShowGutter",
    "setHScrollBarAlwaysVisible",
    "setVScrollBarAlwaysVisible",
    "setTheme",
    "session",
    "setTabSize",
    "setUseSoftTabs",
    "setUseWrapMode",
    "selection",
    "moveCursorFileStart",
    "scrollToX",
    "scrollToY",
    "executeAction",
    "event",
    "_setValueSilently",
    "destruct",
    "AceComponent"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/*\n\tQookery - Declarative UI Building for Qooxdoo\n\n\tCopyright (c) Ergobyte Informatics S.A., www.ergobyte.gr\n\n\tLicensed under the Apache License, Version 2.0 (the \"License\");\n\tyou may not use this file except in compliance with the License.\n\tYou may obtain a copy of the License at\n\n\t\thttp://www.apache.org/licenses/LICENSE-2.0\n\n\tUnless required by applicable law or agreed to in writing, software\n\tdistributed under the License is distributed on an \"AS IS\" BASIS,\n\tWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n\tSee the License for the specific language governing permissions and\n\tlimitations under the License.\n*/\n\n/**\n * @asset(qookery/lib/ace/*)\n *\n * @ignore(ace.*)\n */\nqx.Class.define(\"qookery.ace.internal.AceComponent\", {\n\n\textend: qookery.internal.components.EditableComponent,\n\n\tconstruct: function(parentComponent) {\n\t\tthis.base(arguments, parentComponent);\n\t},\n\n\tmembers: {\n\n\t\t__editor: null,\n\t\t__ignoreChangeEvents: null,\n\n\t\t// Metadata\n\n\t\tgetAttributeType: function(attributeName) {\n\t\t\tswitch(attributeName) {\n\t\t\tcase \"display-indent-guides\":\n\t\t\tcase \"h-scroll-bar-always-visible\":\n\t\t\tcase \"highlight-active-line\":\n\t\t\tcase \"show-fold-widgets\":\n\t\t\tcase \"show-invisibles\":\n\t\t\tcase \"show-gutter\":\n\t\t\tcase \"show-print-margin\":\n\t\t\tcase \"use-soft-tabs\":\n\t\t\tcase \"use-wrap-mode\":\n\t\t\tcase \"v-scroll-bar-always-visible\":\n\t\t\t\treturn \"Boolean\";\n\t\t\tcase \"print-margin-column\":\n\t\t\tcase \"tab-size\":\n\t\t\t\treturn \"Integer\";\n\t\t\tcase \"cursor-style\":\n\t\t\tcase \"theme\":\n\t\t\t\treturn \"String\";\n\t\t\tcase \"auto-complete\":\n\t\t\t\treturn \"StringList\";\n\t\t\tdefault: return this.base(arguments, attributeName);\n\t\t\t}\n\t\t},\n\n\t\tsetAttribute: function(attributeName, value) {\n\t\t\tif(this.__editor != null) {\n\t\t\t\tswitch(attributeName) {\n\t\t\t\tcase \"mode\":\n\t\t\t\t\tthis.__editor.getSession().setMode(\"ace/mode/\" + value);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn this.base(arguments, attributeName, value);\n\t\t},\n\n\t\t// Construction\n\n\t\t_createMainWidget: function() {\n\t\t\tvar widget = new qookery.ace.internal.AceWidget(this);\n\t\t\tthis._applyWidgetAttributes(widget);\n\t\t\treturn widget;\n\t\t},\n\n\t\tsetup: function() {\n\t\t\tvar libraryNames = [ \"ace\" ];\n\t\t\tvar autoComplete = this.getAttribute(\"auto-complete\");\n\t\t\tif(autoComplete != null)\n\t\t\t\tlibraryNames.push(\"aceLanguageTools\");\n\t\t\tqookery.Qookery.getRegistry().loadLibrary(libraryNames, function(error) {\n\t\t\t\tif(error != null) {\n\t\t\t\t\tthis.error(\"Error loading library\", error);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tvar aceWidget = this.getMainWidget();\n\t\t\t\tif(aceWidget.getContentElement().getDomElement()) {\n\t\t\t\t\tthis.__attachAceEditor(aceWidget);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\taceWidget.addListenerOnce(\"appear\", function() {\n\t\t\t\t\tthis.__attachAceEditor(aceWidget);\n\t\t\t\t}, this);\n\t\t\t}, this);\n\t\t\tthis.base(arguments);\n\t\t},\n\n\t\t// Public methods\n\n\t\tgetEditor: function() {\n\t\t\treturn this.__editor;\n\t\t},\n\n\t\t// Component implementation\n\n\t\t_updateUI: function(value) {\n\t\t\tif(!this.__editor) return;\n\t\t\tthis.__ignoreChangeEvents = true;\n\t\t\ttry {\n\t\t\t\tvar value = this.getValue();\n\t\t\t\tif(value == null) value = \"\";\n\t\t\t\tthis.__editor.getSession().setValue(value);\n\t\t\t}\n\t\t\tcatch(e) {\n\t\t\t\tthis.error(\"Error seting value of ACE editor\", e);\n\t\t\t}\n\t\t\tfinally {\n\t\t\t\tthis.__ignoreChangeEvents = false;\n\t\t\t}\n\t\t},\n\n\t\t_applyValid: function(valid) {\n\t\t\tif(!valid) this.getMainWidget().addState(\"invalid\"); else this.getMainWidget().removeState(\"invalid\");\n\t\t},\n\n\t\tsetInvalidMessage: function(invalidMessage) {\n\t\t\t// Overriden to block default implementation\n\t\t},\n\n\t\tfocus: function() {\n\t\t\tthis.__editor.focus();\n\t\t},\n\n\t\t// Internal\n\n\t\t__attachAceEditor: function(aceWidget) {\n\t\t\tvar aceContainer = aceWidget.getContentElement().getDomElement();\n\n\t\t\tvar editor = this.__editor = ace.edit(aceContainer);\n\t\t\teditor.setReadOnly(this.isReadOnly());\n\t\t\teditor.setHighlightActiveLine(this.getAttribute(\"highlight-active-line\", true));\n\t\t\teditor.setShowFoldWidgets(this.getAttribute(\"show-fold-widgets\", true));\n\t\t\teditor.setShowInvisibles(this.getAttribute(\"show-invisibles\", false));\n\t\t\teditor.setShowPrintMargin(this.getAttribute(\"show-print-margin\", true));\n\t\t\teditor.setOption(\"cursorStyle\", this.getAttribute(\"cursor-style\", \"ace\"));\n\t\t\tvar autoComplete = this.getAttribute(\"auto-complete\");\n\t\t\tif(autoComplete != null) {\n\t\t\t\teditor.setOption(\"enableBasicAutocompletion\", qx.lang.Array.contains(autoComplete, \"basic\"));\n\t\t\t\teditor.setOption(\"enableLiveAutocompletion\", qx.lang.Array.contains(autoComplete, \"live\"));\n\t\t\t\teditor.setOption(\"enableSnippets\", qx.lang.Array.contains(autoComplete, \"snippets\"));\n\t\t\t}\n\t\t\teditor.$blockScrolling = Infinity;\n\t\t\teditor.on(\"change\", this.__onChange.bind(this));\n\n\t\t\tvar renderer = editor.renderer;\n\t\t\trenderer.setPrintMarginColumn(this.getAttribute(\"print-margin-column\", 80));\n\t\t\trenderer.setDisplayIndentGuides(this.getAttribute(\"display-indent-guides\", true));\n\t\t\trenderer.setShowGutter(this.getAttribute(\"show-gutter\", true));\n\t\t\trenderer.setHScrollBarAlwaysVisible(this.getAttribute(\"h-scroll-bar-always-visible\", false));\n\t\t\trenderer.setVScrollBarAlwaysVisible(this.getAttribute(\"v-scroll-bar-always-visible\", false));\n\t\t\trenderer.setTheme(\"ace/theme/\" + this.getAttribute(\"theme\", \"textmate\"));\n\n\t\t\tvar session = editor.getSession();\n\t\t\tsession.setMode(\"ace/mode/\" + this.getAttribute(\"mode\", \"plain_text\"));\n\t\t\tsession.setTabSize(this.getAttribute(\"tab-size\", 4));\n\t\t\tsession.setUseSoftTabs(this.getAttribute(\"use-soft-tabs\", true));\n\t\t\tsession.setUseWrapMode(this.getAttribute(\"use-wrap-mode\", false));\n\n\t\t\tthis._updateUI(this.getValue());\n\t\t\teditor.selection.moveCursorFileStart();\n\t\t\trenderer.scrollToX(0);\n\t\t\trenderer.scrollToY(0);\n\n\t\t\tthis.executeAction(\"initializeEditor\", editor);\n\t\t},\n\n\t\t__onChange: function(event) {\n\t\t\tif(this.__ignoreChangeEvents) return;\n\t\t\tvar value = this.__editor.getSession().getValue();\n\t\t\tif(value === \"\") value = null;\n\t\t\tthis._setValueSilently(value);\n\t\t}\n\t},\n\n\tdestruct: function() {\n\t\tthis.__editor = null;\n\t}\n});\n"
  ]
}